
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>ThunderOx software's What about living?</title>

	<style>
		@font-face {
			font-family: 'DrawingWithMarkers';
			src: url('DrawingWithMarkers.ttf');
		}

		body {
			background-color: #000000;
			color: #eeeeee;
			 font-family: "DrawingWithMarkers";
		}
	</style>

	<canvas id="myCanvas" width="800" height="500" style="border:1px solid #000000;">
	</canvas> 

	<script type='text/javascript' src='font-detect.js'></script>
	<script type='text/javascript' src='map.js'></script>
	<script type='text/javascript' src='keys.js'></script>
	<script type='text/javascript' src='mouse.js'></script>
	<script type='text/javascript' src='characters.js'></script>

	<script>

		//----------------------------------------------------------

		/**
		 * Provides requestAnimationFrame in a cross browser way.
		 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
		 */

		if ( !window.requestAnimationFrame ) {

			window.requestAnimationFrame = ( function() {

				return window.webkitRequestAnimationFrame ||
				window.mozRequestAnimationFrame || // comment out if FF4 is slow (it caps framerate at ~30fps: https://bugzilla.mozilla.org/show_bug.cgi?id=630127)
				window.oRequestAnimationFrame ||
				window.msRequestAnimationFrame ||
				function( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element ) {

					window.setTimeout( callback, 1000 / 60 );

				};

			} )();

		}

		var current_room_number = 6;

		var image_number = 0;
		

		var avatar_img = new Image(); 
		avatar_img.onload = inc_image_number;
		avatar_img.src='gfx/AvatarMalePlayer.png'; 

		var energy_img = new Image(); 
		energy_img.onload = inc_image_number;
		energy_img.src='gfx/energy.png'; 

		var current_room_img = new Image(); 
		current_room_img.onload = inc_image_number;
		current_room_img.src = rooms[current_room_number].image_file;

		var player_panel_img = new Image(); 
		player_panel_img.onload = inc_image_number;
		player_panel_img.src='gfx/PlayerPanel.png';

		var inventory_bag_img = new Image(); 
		inventory_bag_img.onload = inc_image_number;
		inventory_bag_img.src='gfx/InventoryBag.png'; 

		var inventory_list_img = new Image(); 
		inventory_list_img.onload = inc_image_number;
		inventory_list_img.src='gfx/InventoryList.png'; 

		var go_up_arrow_img = new Image(); 
		go_up_arrow_img.onload = inc_image_number;
		go_up_arrow_img.src='gfx/arrow_up.png'; 

		var go_down_arrow_img = new Image(); 
		go_down_arrow_img.onload = inc_image_number;
		go_down_arrow_img.src='gfx/arrow_down.png'; 

		var go_left_arrow_img = new Image(); 
		go_left_arrow_img.onload = inc_image_number;
		go_left_arrow_img.src='gfx/arrow_left.png'; 

		var go_right_arrow_img = new Image(); 
		go_right_arrow_img.onload = inc_image_number;
		go_right_arrow_img.src='gfx/arrow_right.png'; 

		FontDetect.onFontLoaded ('DrawingWithMarkers',inc_image_number, null);

		function inc_image_number()
		{
			image_number++;

			if (image_number == 11) { show_canvas(); }
		}

		function show_canvas()
		{
			var c = document.getElementById("myCanvas");
			var ctx = c.getContext("2d");

			ctx.drawImage(current_room_img,0,0);

			ctx.drawImage(player_panel_img,(800-256),0); 
			ctx.fillStyle = "#000000";
			ctx.strokeRect(800-256,0,256,128);
	 
			ctx.fillStyle = "rgba(0,0,0, 0.75)";
			ctx.fillRect(4,20,536,48);
			ctx.fillStyle = "#000000";
			ctx.strokeRect(4,20,536,48);

			ctx.drawImage(avatar_img,(800-128),0); 
			ctx.drawImage(energy_img,(800-250),128-24);
			ctx.drawImage(inventory_bag_img,(800-220),8);

			if ( rooms[current_room_number].west > 0 )
			{		
				if (current_arrow != 4) { ctx.globalAlpha = 0.75; } else { ctx.globalAlpha = 1.0; }
				ctx.drawImage(go_left_arrow_img,0,500/2);
			}

			if ( rooms[current_room_number].east > 0 )
			{
				if (current_arrow != 3) { ctx.globalAlpha = 0.75; } else { ctx.globalAlpha = 1.0; }
				ctx.drawImage(go_right_arrow_img,800-140,500/2);		
			}

			if ( rooms[current_room_number].north > 0)
			{
				if (current_arrow != 1) { ctx.globalAlpha = 0.75; } else { ctx.globalAlpha = 1.0; }
				ctx.drawImage(go_up_arrow_img,(800/2)-32,72);
			}

			if ( rooms[current_room_number].south > 0)
			{
				if (current_arrow != 2) { ctx.globalAlpha = 0.75; } else { ctx.globalAlpha = 1.0; }
				ctx.drawImage(go_down_arrow_img,(800/2)-32,500-140);
			}

			ctx.globalAlpha = 1.0;

			ctx.drawImage(inventory_list_img,(800-256),128+16);

			show_characters(current_room_number, ctx);

			ctx.fillStyle = "#ffffff";
			ctx.font = "26px DrawingWithMarkers";
			ctx.fillText("Current location - " + rooms[current_room_number].name,10,50);
		}

		var lastRender = new Date();

		function main_loop()
		{
		  	var delta = new Date() - lastRender;
			checkKeys();
		        requestAnimationFrame(main_loop);
		}


	        requestAnimationFrame(main_loop);
	
	</script> 

    </head>

    <body>
        <h1>
		What about living?
	</h1>

	<p>
		(c)2015 ThunderOx Software - Concept, Design & Art by Kathryn Wood - Programming by Nick bailey
	</p>

    </body>

</html>

 








