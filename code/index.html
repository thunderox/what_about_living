
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>ThunderOx software's What about living?</title>

	<style>
		@font-face {
			font-family: 'DrawingWithMarkers';
			src: url('DrawingWithMarkers.ttf');
		}

		body {
			background-color: #000000;
			color: #eeeeee;
			 font-family: "DrawingWithMarkers";
		}
	</style>

	<canvas id="myCanvas" width="800" height="500" style="border:1px solid #000000;">
	</canvas> 

	<script type='text/javascript' src='font-detect.js'></script>
	<script type='text/javascript' src='map.js'></script>
	<script type='text/javascript' src='keys.js'></script>
	<script type='text/javascript' src='mouse.js'></script>
	<script type='text/javascript' src='characters.js'></script>
	<script type='text/javascript' src='clickables.js'></script>
	<script>

		//----------------------------------------------------------

		/**
		 * Provides requestAnimationFrame in a cross browser way.
		 * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
		 */

		if ( !window.requestAnimationFrame ) {

			window.requestAnimationFrame = ( function() {

				return window.webkitRequestAnimationFrame ||
				window.mozRequestAnimationFrame || // comment out if FF4 is slow (it caps framerate at ~30fps: https://bugzilla.mozilla.org/show_bug.cgi?id=630127)
				window.oRequestAnimationFrame ||
				window.msRequestAnimationFrame ||
				function( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element ) {

					window.setTimeout( callback, 1000 / 60 );

				};

			} )();

		}

		var current_room_number = 6;

		var image_number = 0;
		
		add_clickable("room",rooms[current_room_number].image_file, 0,0); 
		inc_image_number();

		add_clickable("arrow_north","gfx/arrow_up.png", (800/2)-32, 72);
		inc_image_number();

		add_clickable("arrow_south","gfx/arrow_down.png", (800/2)-32, 500-140);
		inc_image_number();

		add_clickable("arrow_east","gfx/arrow_right.png", 800-140, 500/2); 
		inc_image_number();

		add_clickable("arrow_west","gfx/arrow_left.png", 0, 500/2);
		inc_image_number();

		add_clickable("player1","gfx/AvatarMalePlayer.png", 800-128,0); 
		inc_image_number();

		add_clickable("player1_energy","gfx/energy.png", 800-250,128-24); 
		inc_image_number();

		add_clickable("inventory_bag","gfx/InventoryBag.png", 800-220,8);
		inc_image_number();

		add_clickable("inventory_list","gfx/InventoryList.png", 800-256,128+16);
		inc_image_number();

		add_clickable("player1_panel","gfx/PlayerPanel.png", 800-256,0);
		inc_image_number();



 

		FontDetect.onFontLoaded ('DrawingWithMarkers',inc_image_number, null);

		function inc_image_number()
		{
			image_number++;

			if (image_number == 11) { show_canvas(); }
		}

		function show_canvas()
		{
			var c = document.getElementById("myCanvas");
			var ctx = c.getContext("2d");

			show_clickable(ctx, "room");
			show_clickable(ctx, "player1_panel");

			ctx.fillStyle = "#000000";
			ctx.strokeRect(800-256,0,256,128);
	 
			ctx.fillStyle = "rgba(0,0,0, 0.75)";
			ctx.fillRect(4,20,536,48);
			ctx.fillStyle = "#000000";
			ctx.strokeRect(4,20,536,48);

			show_clickable(ctx, "player1");
			show_clickable(ctx, "player1_energy");
			show_clickable(ctx, "inventory_bag");


			if ( rooms[current_room_number].north > 0)
			{
				if (current_arrow != 1) { ctx.globalAlpha = 0.75; } else { ctx.globalAlpha = 1.0; }
				show_clickable(ctx, "arrow_north");
			}

			if ( rooms[current_room_number].south > 0)
			{
				if (current_arrow != 2) { ctx.globalAlpha = 0.75; } else { ctx.globalAlpha = 1.0; }
				show_clickable(ctx, "arrow_south");
			}

			if ( rooms[current_room_number].east > 0 )
			{
				if (current_arrow != 3) { ctx.globalAlpha = 0.75; } else { ctx.globalAlpha = 1.0; }
				show_clickable(ctx, "arrow_east");		
			}

			if ( rooms[current_room_number].west > 0 )
			{		
				if (current_arrow != 4) { ctx.globalAlpha = 0.75; } else { ctx.globalAlpha = 1.0; }
				show_clickable(ctx, "arrow_west");
			}




			ctx.globalAlpha = 1.0;

			// show_clickable(ctx, "inventory_list");

			show_characters(current_room_number, ctx);

			ctx.fillStyle = "#ffffff";
			ctx.font = "26px DrawingWithMarkers";
			ctx.fillText("Current location - " + rooms[current_room_number].name,10,50);
		}

		var lastRender = new Date();

		function main_loop()
		{
		  	var delta = new Date() - lastRender;
			checkKeys();
		        requestAnimationFrame(main_loop);
		}


	        requestAnimationFrame(main_loop);
	
	</script> 

    </head>

    <body>
        <h1>
		What about living?
	</h1>

	<p>
		(c)2015 ThunderOx Software - Concept, Design & Art by Kathryn Wood - Programming by Nick bailey
	</p>

    </body>

</html>

 








